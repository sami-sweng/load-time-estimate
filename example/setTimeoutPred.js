var Lte = require("../lib/index.js");
var lte = new Lte({
    planned: [0,
        0.00019894558838157763,
        0.010345170595842038,
        0.020491395603302497,
        0.03043867502238138,
        0.04038595444146026,
        0.05043270665472993,
        0.06037998607380881,
        0.07032726549288769,
        0.08027454491196657,
        0.09032129712523625,
        0.10026857654431513,
        0.110215855963394,
        0.12026260817666368,
        0.13020988759574256,
        0.14015716701482145,
        0.15020391922809112,
        0.16015119864717,
        0.1700984780662489,
        0.18004575748532775,
        0.19009250969859742,
        0.20023873470605788,
        0.21018601412513677,
        0.22013329354421565,
        0.23008057296329454,
        0.2401273251765642,
        0.25007460459564307,
        0.260021884014722,
        0.27006863622799165,
        0.2800159156470705,
        0.2899631950661494,
        0.30010942007360986,
        0.31005669949268877,
        0.32000397891176763,
        0.3299512583308465,
        0.33999801054411616,
        0.34994528996319507,
        0.35989256938227393,
        0.3699393215955436,
        0.3799860738088133,
        0.3899333532278922,
        0.39988063264697105,
        0.4099273848602407,
        0.41987466427931963,
        0.4298219436983985,
        0.43986869591166816,
        0.449815975330747,
        0.4598627275440167,
        0.4698100069630956,
        0.47975728638217446,
        0.48980403859544414,
        0.49975131801452305,
        0.5096985974336019,
        0.5196458768526808,
        0.5296926290659505,
        0.5396399084850293,
        0.5495871879041082,
        0.5596339401173779,
        0.5695812195364568,
        0.5795284989555357,
        0.5895752511688054,
        0.599622003382075,
        0.6095692828011539,
        0.6195165622202328,
        0.6295633144335024,
        0.6396100666467721,
        0.6496568188600418,
        0.659902516661693,
        0.6699492688749626,
        0.6799960210882323,
        0.6899433005073112,
        0.6998905799263901,
        0.7099373321396598,
        0.7198846115587387,
        0.7298318909778175,
        0.7397791703968964,
        0.7498259226101661,
        0.759773202029245,
        0.7697204814483238,
        0.7797672336615935,
        0.7897145130806724,
        0.7996617924997513,
        0.8096090719188302,
        0.8196558241320999,
        0.8296031035511787,
        0.8395503829702576,
        0.8494976623893365,
        0.8595444146026062,
        0.8700885307868298,
        0.8801352830000995,
        0.8900825624191784,
        0.900129314632448,
        0.9100765940515269,
        0.9200238734706058,
        0.9299711528896847,
        0.9400179051029544,
        0.9499651845220333,
        0.9599124639411121,
        0.9699592161543817,
        0.9799064955734607,
        0.9898537749925396,
        1
    ],
    avgTimePer100Percent: 500.53
});
var moment = require("moment");
require('moment-precise-range-plugin');

lte.addLoop(10000);

var num = 0;
for (var i = 0; i < 10000; i++) {
    lte.addLoopIteration();
    num += Math.random();
}

var ms = Math.random() * 1000;
console.log("will last" + moment.preciseDiff(0, ms * 100));

var next = function(i, cb) {
    if (i > 0) {
        setTimeout(function() {
            lte.addStep();
            next(i - 1, cb);
        }, ms);
    } else {
        cb();
    }
}

next(100, function() {
    lte.addStep();
    console.log("done!");
    process.exit();
});

setInterval(function() {
    console.log(lte.getRemainingTimeEstimate());
}, 50);
